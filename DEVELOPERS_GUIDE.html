<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developer and Contributor Guide &mdash; VOTCA 2022-dev documentation</title>
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="VOTCA Internal Contributor Language Guide" href="VOTCA_LANGUAGE_GUIDE.html" />
    <link rel="prev" title="Kinect Monte Carlo Simulations Using LAMMPS" href="xtp-tutorials/LAMMPS_KMC.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/customLogo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Main">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="INSTALL.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tools/index.html">TOOLS Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="csg/index.html">CSG Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="xtp/XTP-MANUAL.html">XTP Manual</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="csg-tutorials/README.html">CSG Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="xtp-tutorials/XTP-TUTORIAL.html">XTP Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer and Contributor Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formatting-code">Formatting code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#doxygen-documentation">Doxygen documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#votca-dev-tools">VOTCA dev-tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#votca-continuous-integration-github-actions">VOTCA Continuous Integration (GitHub Actions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#making-a-release">Making a Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#major-releases">Major releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#release-names">Release names</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cpp-resources">CPP Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cpp-coding-rules">CPP Coding Rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#files">Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#includes">Includes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#header-files">Header Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#auto">Auto</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naming-in-classes">Naming in Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-set-functions">get/set Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pointers">Pointers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#votca-specifics-indexing-ids-units">VOTCA specifics (indexing, ids, units)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#unit-testing">Unit Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-across-repos">Testing Across Repos</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cpp-coding-style-guide">CPP Coding Style Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#clang-format">clang-format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autopep8">autopep8</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automating-formatting">Automating Formatting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cpp-comment-guide">CPP Comment Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-git-submodules">Updating Git Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#failed-release-builds">Failed Release Builds</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="VOTCA_LANGUAGE_GUIDE.html">VOTCA Internal Contributor Language Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="websiteAndDocumentation.html">Website and Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/votca">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://twitter.com/votca_software">Twitter</a></li>
<li class="toctree-l1"><a class="reference external" href="https://groups.google.com/g/votca">Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" aria-label="Top" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">VOTCA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          

<div role="navigation" aria-label="Breadcrumbs">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Developer and Contributor Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/DEVELOPERS_GUIDE.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="developer-and-contributor-guide">
<h1>Developer and Contributor Guide<a class="headerlink" href="#developer-and-contributor-guide" title="Permalink to this headline">¶</a></h1>
<p>This page is designed to give new developers general guidelines for
implementing code consistent with the VOTCA and cpp style and standard.</p>
<ul class="simple">
<li><p><a class="reference external" href="#reporting-bugs">Reporting Bugs</a></p></li>
<li><p><a class="reference external" href="#making-a-release">Making a release</a></p></li>
<li><p><a class="reference external" href="#cpp-resources">CPP Resources</a></p></li>
<li><p><a class="reference external" href="#CPP-Coding-Rules">CPP Coding Rules</a></p></li>
<li><p><a class="reference external" href="#testing">Testing</a></p></li>
<li><p><a class="reference external" href="#cpp-coding-style-guide">CPP Coding Style Guide</a></p></li>
<li><p><a class="reference external" href="#cpp-comment-guide">CPP Comment Guide</a></p></li>
<li><p><a class="reference external" href="#updating-git-submodules">Updating Git Submodules</a></p></li>
<li><p><a class="reference external" href="#updates-from-stable">Updates from stable</a></p></li>
<li><p><a class="reference external" href="#failed-release-builds">Failed Release Builds</a></p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">`</span></a></p></li>
</ul>
<div class="section" id="reporting-bugs">
<h2>Reporting Bugs<a class="headerlink" href="#reporting-bugs" title="Permalink to this headline">¶</a></h2>
<p>To report a bug, please create an issue on the appropriate GitHub repo.
Please be sure to provide as much information as possible such as:</p>
<ul class="simple">
<li><p>The error messages</p></li>
<li><p>The operating system</p></li>
<li><p>What compiler was used</p></li>
<li><p>What dependencies were installed</p></li>
<li><p>The calculation that was being run</p></li>
</ul>
<p>Issues can be directly created on the appropriate GitHub repo:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/votca/tools/issues">tools</a></p></li>
<li><p><a class="reference external" href="https://github.com/votca/csg/issues">csg</a></p></li>
<li><p><a class="reference external" href="https://github.com/votca/csg-tutorials/issues">csg-tutorials</a></p></li>
<li><p><a class="reference external" href="https://github.com/votca/xtp/issues">xtp</a></p></li>
<li><p><a class="reference external" href="https://github.com/votca/votca/issues">votca</a></p></li>
</ul>
</div>
<div class="section" id="formatting-code">
<h2>Formatting code<a class="headerlink" href="#formatting-code" title="Permalink to this headline">¶</a></h2>
<p>VOTCA uses <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> to format the code, code that is not
properly formatted is automatically rejected. The style files can be
found in each repo. CMake provides a format target which you can run to format your code.
The easiest way to format your code is just a <code class="docutils literal notranslate"><span class="pre">&#64;votca-bot</span> <span class="pre">format</span></code> comment in the PR, which then will automatically format your code.</p>
</div>
<div class="section" id="doxygen-documentation">
<h2>Doxygen documentation<a class="headerlink" href="#doxygen-documentation" title="Permalink to this headline">¶</a></h2>
<p>A complete overview of all C++ classes and code can be found <a class="reference external" href="https://doc.votca.org/">here</a> .</p>
</div>
<div class="section" id="votca-dev-tools">
<h2>VOTCA dev-tools<a class="headerlink" href="#votca-dev-tools" title="Permalink to this headline">¶</a></h2>
<p>Running clang-format on every commit can be a drag, as can changing the
copyright in every header. Fortunately, you will find small scripts in the
<a class="reference external" href="https://github.com/votca/dev-tools">dev-tools repo</a>, which can
automate this.</p>
</div>
<div class="section" id="votca-continuous-integration-github-actions">
<h2>VOTCA Continuous Integration (GitHub Actions)<a class="headerlink" href="#votca-continuous-integration-github-actions" title="Permalink to this headline">¶</a></h2>
<p>Each pull request to master in the tools, csg, csg-tutorials, xtp, xtp-tutorials or votca repository
is built on a machine in the cloud using <a class="reference external" href="https://docs.github.com/en/actions">GitHub actions</a></p>
<p>VOTCA can be built on various linux distributions, which are not all natively supported by GitHub actions. For non natively supported distributions,
instead of using the default virtual machines, VOTCA first builds and then runs a <a class="reference external" href="https://www.docker.com/resources/what-container">docker container</a> for each Pull Request. The container contains all the necessary dependencies of VOTCA (see <code class="code docutils literal notranslate"><span class="pre">buildenv</span></code> below)</p>
<p>The docker images can be found at <a class="reference external" href="https://hub.docker.com/u/votca">Docker Hub</a>. The <strong>votca/buildenv</strong> containers are the basic containers, which contain all the dependencies VOTCA requires; VOTCA code itself is not included. The <strong>votca/buildenv</strong> can be found on <a class="reference external" href="https://github.com/orgs/votca/packages">VOTCA’s GitHub Container registry</a>.
The actual containers used for running the test builds are built on top of the <strong>votca/buildenv</strong> containers, the resulting <strong>votca/votca</strong> container can be found on <a class="reference external" href="https://hub.docker.com/u/votca">Docker Hub</a> as well as <a class="reference external" href="https://github.com/orgs/votca/packages">VOTCA’s GitHub Container registry</a>.</p>
<p>More information can be found in the <a class="reference external" href="https://github.com/votca/votca/tree/master/.github/workflows">GitHub workflow files</a>.</p>
</div>
<div class="section" id="making-a-release">
<h2>Making a Release<a class="headerlink" href="#making-a-release" title="Permalink to this headline">¶</a></h2>
<p>Similar to the VOTCA containers, releases are also handled by GitHub actions. <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> has a <code class="code docutils literal notranslate"><span class="pre">release</span></code> workflow that can only be triggered manually.
To trigger it go <a class="reference external" href="https://github.com/votca/votca/actions?query=workflow%3Arelease">here</a>. The release can only be made from the
<code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch, but testing the creation of a release can be triggered on any branch. To make a release, trigger the action from the
<code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch, pick a new release tag in the <code class="code docutils literal notranslate"><span class="pre">release</span> <span class="pre">tag</span></code> box (all CHANGELOG files should already contain a section with the tag, but the date will be updated) and type <code class="code docutils literal notranslate"><span class="pre">yesyesyes</span></code> into the deploy box. A new release will trigger the creation of the release tag in all involved submodules (plus pull requests for the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> to <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch, see <a class="reference external" href="#updates-from-stable">below</a>).</p>
<div class="section" id="major-releases">
<h3>Major releases<a class="headerlink" href="#major-releases" title="Permalink to this headline">¶</a></h3>
<p>In preparation for a major (not minor!) release the following additional steps need to be done:
-  Create a new branch from the master branch of the <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> repository and also in each of the submodules, e.g. <code class="code docutils literal notranslate"><span class="pre">stable_bump</span></code>.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">stable_bump</span>
<span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">stable_bump</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Bump the version in each of the CMakeLists files in the <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> repository and each of the submodules. This can be done by
replacing the string <code class="code docutils literal notranslate"><span class="pre">&lt;major&gt;-dev</span></code> by <code class="code docutils literal notranslate"><span class="pre">&lt;major&gt;-rc.1</span></code> in the main <code class="code docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> of <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> and all submodules.</p></li>
<li><p>Update the <code class="code docutils literal notranslate"><span class="pre">CHANGELOG.rst</span></code> files accordingly, by changing the top most section from <code class="code docutils literal notranslate"><span class="pre">&lt;major&gt;-dev</span></code> to <code class="code docutils literal notranslate"><span class="pre">&lt;major&gt;-rc.1</span></code></p></li>
<li><p>Commit changes in all submodules and update the submodules in <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Version bumped to &lt;major&gt;-rc.1&quot;</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">u</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot; Version bumped to &lt;major&gt;-rc.1&quot;</span>
</pre></div>
</div>
</li>
<li><p>Push everything, but do NOT make the pull requests yet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">stable_bump</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">stable_bump</span>
</pre></div>
</div>
</li>
<li><p>Create a branch, e.g. <code class="code docutils literal notranslate"><span class="pre">master_bump</span></code>, in <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> and all submodules from the current master</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">master_bump</span>
<span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">master_bump</span>
</pre></div>
</div>
</li>
<li><p>Bump the version in each of the CMakeLists files in the <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> repository and each of the submodules. This can be done by
replacing the string <code class="code docutils literal notranslate"><span class="pre">&lt;major&gt;-dev</span></code> by <code class="code docutils literal notranslate"><span class="pre">&lt;major+1&gt;-dev</span></code> in the main <code class="code docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> of <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> and all submodules.</p></li>
<li><p>Create a new secion in the <code class="code docutils literal notranslate"><span class="pre">CHANGELOG.rst</span></code> files for <code class="code docutils literal notranslate"><span class="pre">&lt;major+1&gt;-dev</span></code></p></li>
<li><p>Commit changes in all submodules and update the submodules in <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Version bumped to &lt;major+1&gt;-dev&quot;</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">u</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot; Version bumped to &lt;major+1&gt;-dev&quot;</span>
</pre></div>
</div>
</li>
<li><p>Push everything, but do NOT make the pull requests yet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodules</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master_bump</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master_bump</span>
</pre></div>
</div>
</li>
<li><p>Now, create a PR in <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> from <code class="code docutils literal notranslate"><span class="pre">master_bump</span></code> into <code class="code docutils literal notranslate"><span class="pre">master</span></code></p></li>
<li><p>Once merged, create PRs in all submodules from <code class="code docutils literal notranslate"><span class="pre">master_bump</span></code> into <code class="code docutils literal notranslate"><span class="pre">master</span></code></p></li>
<li><p>Once all of these are merged and the automatically “Update master submodules” PR is merged, start with <code class="code docutils literal notranslate"><span class="pre">stable_bump</span></code> PRs</p></li>
<li><p>Create a PR in <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> from the <code class="code docutils literal notranslate"><span class="pre">stable_bump</span></code> branch into the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch</p></li>
<li><p>Once merged, create PRs in all submodules from each of the <code class="code docutils literal notranslate"><span class="pre">stable_bump</span></code> branches into each of their <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branches</p></li>
<li><p>Once all of them are merged and merge the automatically “Update stable submodules” PR</p></li>
<li><p>Now everything is ready for the automatic release creation by Github Actions</p></li>
</ul>
</div>
<div class="section" id="release-names">
<h3>Release names<a class="headerlink" href="#release-names" title="Permalink to this headline">¶</a></h3>
<p>Some releases have names, so far we have:</p>
<ul class="simple">
<li><p>1.1: SuperAnn - named after the spouse of a core developer</p></li>
<li><p>1.2: SuperDoris - named after the administrator at MPI-P (VOTCA’s birthplace)</p></li>
<li><p>1.3: SuperUzma - named after the spouse of a core developer</p></li>
<li><p>1.4: SuperKurt - in occasion of Kurt Kremer’s 60th birthday</p></li>
<li><p>1.5: SuperVictor - named after Victor Rühle, one of the original core developers</p></li>
<li><p>1.6: SuperPelagia - named after the spouse of a core developer</p></li>
<li><p>1.6.2: SuperGitta - in memory of the grandmother of a core developer</p></li>
</ul>
</div>
</div>
<div class="section" id="cpp-resources">
<h2>CPP Resources<a class="headerlink" href="#cpp-resources" title="Permalink to this headline">¶</a></h2>
<p>A good starting point, is to take a look at the cpp standard. Though the
code has not always consistently followed the cpp standard we now make
an effort to really enforce it and follow best practices.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.gitbook.com/book/lefticus/cpp-best-practices/details">Best
Practices1</a></p></li>
<li><p><a class="reference external" href="https://google.github.io/styleguide/cppguide.html">Best
Practices2</a></p></li>
</ul>
</div>
<div class="section" id="cpp-coding-rules">
<h2>CPP Coding Rules<a class="headerlink" href="#cpp-coding-rules" title="Permalink to this headline">¶</a></h2>
<p>Here are a few general rules that should be followed:</p>
<div class="section" id="files">
<h3>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Each class goes into a separate file.</p></li>
<li><p>Each filename should be the the name of the class it contains written in lowercase.</p></li>
</ul>
</div>
<div class="section" id="includes">
<h3>Includes<a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>When including a header file from within the same repo that you are
working use the relative includes. This consists of using quotation
marks i.e.</p>
<p>#include “molecule.h”</p>
</li>
<li><p>When including from another repository, for instance you are working
in the csg repostory and want to include a file from the tools repo
use the anglular brackets i.e.</p>
<p>#include &lt;votca/tools/molecule.h&gt;</p>
</li>
</ul>
</div>
<div class="section" id="header-files">
<h3>Header Files<a class="headerlink" href="#header-files" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>One class, one header.</p></li>
<li><p>When creating header guards use the template: VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H. Where
“VOTCA-REPO-NAME” is replaced by whichever repo the header file is in, this could be
tools, csg or xtp. The “CLASS-NAME” component should also be replaced, but by the name of the
class described in the header file:</p>
<p>#ifndef VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H #define
VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H : Code : #endif //
VOTCA_VOTCA-REPO-NAME_CLASS-NAME_H</p>
</li>
<li><p>Never use the “using namespace” in a header file.</p></li>
<li><p>Avoid using includes in header files. If possible forward declare a
class instead.</p></li>
</ul>
</div>
<div class="section" id="auto">
<h3>Auto<a class="headerlink" href="#auto" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Avoid using auto unless the type is very long, the reason being auto
obscures the underlying type and can make it difficult to discern
what a variable is meant to be used for.</p></li>
</ul>
</div>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Normally class names in upper case.</p></li>
<li><p>Order of access modifiers in class definitions should be as follows:
-  first <code class="docutils literal notranslate"><span class="pre">public</span></code> all functions
-  then <code class="docutils literal notranslate"><span class="pre">private</span></code>/<code class="docutils literal notranslate"><span class="pre">protected</span></code> all member variables
-  then <code class="docutils literal notranslate"><span class="pre">private</span></code>/<code class="docutils literal notranslate"><span class="pre">protected</span></code> member functions</p></li>
<li><p>There is no rule as to where to define a <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">typedef</span></code> in the class.</p></li>
<li><p>All member variables are <code class="docutils literal notranslate"><span class="pre">private</span></code>/<code class="docutils literal notranslate"><span class="pre">public</span></code>.</p></li>
<li><p>The body of class methods should be placed in a source file or inlined at the end of the header if it exceeds a single line.</p></li>
</ul>
</div>
<div class="section" id="naming-in-classes">
<h3>Naming in Classes<a class="headerlink" href="#naming-in-classes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>All member variables should be in lower case and end with <code class="docutils literal notranslate"><span class="pre">_</span></code>.</p></li>
<li><p>All functions should start with upper case, no <code class="docutils literal notranslate"><span class="pre">_</span></code> should exist in their names.</p></li>
<li><p>Only <code class="docutils literal notranslate"><span class="pre">get</span></code>/<code class="docutils literal notranslate"><span class="pre">set</span></code> methods can begin with lower case letters.</p></li>
<li><p>For consistency all Ids should start at 0 not 1.</p></li>
</ul>
</div>
<div class="section" id="get-set-functions">
<h3>get/set Functions<a class="headerlink" href="#get-set-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get</span></code>/<code class="docutils literal notranslate"><span class="pre">set</span></code> functions should start with a lowercase <code class="docutils literal notranslate"><span class="pre">get</span></code>/<code class="docutils literal notranslate"><span class="pre">set</span></code> (these are the only
functions which should directly <code class="docutils literal notranslate"><span class="pre">set</span></code>/<code class="docutils literal notranslate"><span class="pre">get</span></code> a private member variable)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get</span></code> must return a constant reference and keep the <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">const</span></code>:
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">int</span> <span class="pre">&amp;getId()</span> <span class="pre">const;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set</span></code> only sets the member, e.g.
<code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setId(const</span> <span class="pre">int</span> <span class="pre">&amp;id)</span> <span class="pre">{</span> <span class="pre">_id</span> <span class="pre">=</span> <span class="pre">id;</span> <span class="pre">}</span></code></p></li>
</ul>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Functions should remain short.</p></li>
<li><p>Functions should not have more than one use, so use boolean arguments
sparingly.</p></li>
</ul>
</div>
<div class="section" id="pointers">
<h3>Pointers<a class="headerlink" href="#pointers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>In general, use pointers sparringly. Most objects are small and a
copy does not change performance. Use references if you want to avoid copies.</p></li>
<li><p>If your pointer owns an object (i.e. it has to delete it later) use a
<code class="docutils literal notranslate"><span class="pre">unique_ptr</span></code> to it, so you do not have to call <code class="docutils literal notranslate"><span class="pre">delete</span></code> on it
yourself.</p></li>
<li><p>If multiple objects own an object and the last object alive should
delete it, use a <code class="docutils literal notranslate"><span class="pre">shared_ptr</span></code>.</p></li>
<li><p>If your object does not have ownership but just wants to visit, you
can use a raw pointer, but if you can a reference is better.</p></li>
<li><p>If you ever have to explicitly call <code class="docutils literal notranslate"><span class="pre">delete</span></code>, you did something
very wrong.</p></li>
</ul>
</div>
<div class="section" id="general">
<h3>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Do not comment out code, if you do not use it delete it.</p></li>
<li><p>Variables should have clear and explicit names.</p></li>
<li><p>Do not duplicate code.</p></li>
<li><p>Functions should have no more than 3 arguments. Otherwise create a
class.</p></li>
<li><p>XYZ positions should be <code class="docutils literal notranslate"><span class="pre">Eigen::Vector3d</span></code> from the eigen library.</p></li>
<li><p>Readability is more important than elegant design.</p></li>
<li><p>Leave the code better than you found it.</p></li>
<li><p>Use pointers sparingly and especially try not to pass them around
objects. Prefer references.</p></li>
<li><p>Do not write code, which you may use in the future. Only write code
you will use now. Write code, you need later, later. This avoids
cluttering the codebase with unused “at some point we will need this
functions”.</p></li>
</ul>
</div>
<div class="section" id="votca-specifics-indexing-ids-units">
<h3>VOTCA specifics (indexing, ids, units)<a class="headerlink" href="#votca-specifics-indexing-ids-units" title="Permalink to this headline">¶</a></h3>
<p>This can all be found here <a class="reference internal" href="VOTCA_LANGUAGE_GUIDE.html"><span class="doc">VOTCA_LANGUAGE_GUIDE</span></a></p>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="unit-testing">
<h3>Unit Testing<a class="headerlink" href="#unit-testing" title="Permalink to this headline">¶</a></h3>
<p>Each repository contains a src folder. Within the src folder exists a
library folder: libtools, libcsg etc… and a tools folder. A tests
folder should also exist in the src folder. If it does not you should
create one.</p>
<p>For every new object and algorithm created there should exist a test. We
use the Boost libraries testing framework. Good documentation can be
found here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.ibm.com/developerworks/aix/library/au-ctools1_boost/">Boost
link</a></p></li>
</ul>
<p>We will outline the general workflow here using the vec object in
votca::tools. This object only has a header file it is in:
tools/include/votca/tools/vec.h.</p>
<p>Determine if a tests folder has already been created or not in /src. If
it has not, take a look at what was done in the votca-tools repo.</p>
<ol class="arabic">
<li><p>Create a test file in
<a class="reference external" href="https://github.com/votca/tools/tree/master/src/tests">tools/src/tests/</a>test_vec.cc
must have the same name as what appears in the foreach in the
CMakeLists.txt file. And place the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define BOOST_TEST_MAIN</span>

<span class="c1">#define BOOST_TEST_MODULE vec_test</span>
<span class="c1">#include &lt;boost/test/unit_test.hpp&gt;</span>
<span class="c1">#include &lt;exception&gt;</span>

<span class="c1">#include &lt;votca/tools/vec.h&gt;</span>

<span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="n">using</span> <span class="n">namespace</span> <span class="n">votca</span><span class="p">::</span><span class="n">tools</span><span class="p">;</span>

<span class="n">BOOST_AUTO_TEST_SUITE</span><span class="p">(</span><span class="n">vec_test</span><span class="p">)</span>


<span class="n">BOOST_AUTO_TEST_CASE</span><span class="p">(</span><span class="n">test1</span><span class="p">){</span>
  <span class="n">vecv</span><span class="p">;</span>
  <span class="n">BOOST_CHECK_EQUAL</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
  <span class="n">BOOST_CHECK_EQUAL</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
  <span class="p">:</span>
<span class="p">}</span>
<span class="n">BOOST_AUTO_TEST_CASE</span><span class="p">(</span><span class="n">test2</span><span class="p">){</span>
  <span class="n">vecv</span><span class="p">;</span>
  <span class="n">BOOST_CHECK_EQUAL</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
  <span class="n">BOOST_CHECK_EQUAL</span><span class="p">(</span><span class="o">...</span><span class="p">);</span>
  <span class="p">:</span>
<span class="p">}</span>
<span class="p">:</span>
<span class="n">BOOST_AUTO_TEST_SUITE_END</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
<p>Replace the ‘…’ and ‘:’ with the appropriate syntax. For more info on
which boost test macros to use refer to the boost documentation</p>
<ol class="arabic" start="2">
<li><p>To compile and test the code create a folder tools/build and run the
following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DENABLE_TESTING</span><span class="o">=</span><span class="n">ON</span> <span class="o">../</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">test</span>
</pre></div>
</div>
</li>
</ol>
<p>Ensure you have an up to date version of cmake or use cmake3.</p>
</div>
<div class="section" id="testing-across-repos">
<h3>Testing Across Repos<a class="headerlink" href="#testing-across-repos" title="Permalink to this headline">¶</a></h3>
<p>There may come a time where changes have to be committed across more
than one repo at the same time. Attempting to merge one repo at a time
will cause the continuous integration to fail as changes in the other
repos will not be pulled in. To do this correctly the following steps
should be taken.</p>
<p>Assuming you are in the votca/votca repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">base_branch</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="o">&lt;</span><span class="n">some_descriptive_branch_name</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">remote</span> <span class="n">update</span>
<span class="n">git</span> <span class="o">-</span><span class="n">C</span> <span class="o">&lt;</span><span class="n">module1</span><span class="o">&gt;</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">sha_or_branch_of_module1_to_test</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="o">-</span><span class="n">C</span> <span class="o">&lt;</span><span class="n">module2</span><span class="o">&gt;</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">sha_or_branch_of_module2_to_test</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">&lt;</span><span class="n">module1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">module2</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;test &lt;module1&gt; with &lt;module2&gt;&quot;</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="o">&lt;</span><span class="n">some_descriptive_branch_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>Here <code class="docutils literal notranslate"><span class="pre">base_branch</span></code> will typically be the <code class="code docutils literal notranslate"><span class="pre">master</span></code> or <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">base_branch</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>The submodules are updated to be sure they have incorporated the
latest changes in your local repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span>
</pre></div>
</div>
</li>
<li><p>Create a branch with a descriptive name.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="o">&lt;</span><span class="n">some_descriptive_name</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Update each of the submodules, by pulling in any remote changes to
the submodules.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">remote</span> <span class="n">update</span>
</pre></div>
</div>
</li>
<li><p>‘-C’ changes directory to the submodule directory and then checks out
the appropriate commit.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="o">-</span><span class="n">C</span> <span class="o">&lt;</span><span class="n">module1</span><span class="o">&gt;</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">sha_or_branch_of_module1_to_test</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="o">-</span><span class="n">C</span> <span class="o">&lt;</span><span class="n">module2</span><span class="o">&gt;</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">sha_or_branch_of_module2_to_test</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>The changes are then added and commited.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">&lt;</span><span class="n">module1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">module2</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;test &lt;module1&gt; with &lt;module2&gt;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Finally, they are pushed to the remote branch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="o">&lt;</span><span class="n">some_descriptive_branch_name</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ol>
<p>A pull request is then made for the votca/votca repo using the branch
name. Once the branch passes all tests, it can be merged. Pull requests
for each of the repos changed can then be made. They will now compile
against the updated votca/votca repo. Once they pass their tests, they
can be merged. If a pull request was already made, the travis tests may
simply need to be restarted.</p>
</div>
</div>
<div class="section" id="cpp-coding-style-guide">
<h2>CPP Coding Style Guide<a class="headerlink" href="#cpp-coding-style-guide" title="Permalink to this headline">¶</a></h2>
<p>VOTCA uses a few auto formatting tools to help enforce the rules.</p>
<div class="section" id="clang-format">
<h3><a class="reference external" href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a><a class="headerlink" href="#clang-format" title="Permalink to this headline">¶</a></h3>
<p>Automatically ensures consistent formatting for .cc and .h files. The
style follows the google style fomatting rules. Have a look at the
<code class="docutils literal notranslate"><span class="pre">.clang-format</span> <span class="pre">file</span></code> in the <a class="reference external" href="https://github.com/votca/votca/blob/master/.clang-format">main votca
repository</a>
for details.</p>
<p>To run the clang-format function on file.cc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clang</span><span class="o">-</span><span class="nb">format</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">style</span><span class="o">=</span><span class="n">file</span> <span class="n">file</span><span class="o">.</span><span class="n">cc</span>
</pre></div>
</div>
<p>‘-i’ ensures it will make changes to file.cc, omitting the ‘-i’ will
display the changes without implementing them. ‘-style=file’ ensures the
format is read from the .clang-format file otherwise it will use a
default style guide.</p>
<p>By default tabs should not be used to indent, avoid inserting ‘\t’, it
is preferable that spaces be used instead.</p>
</div>
<div class="section" id="autopep8">
<h3><a class="reference external" href="https://pypi.org/project/autopep8/0.8/">autopep8</a><a class="headerlink" href="#autopep8" title="Permalink to this headline">¶</a></h3>
<p>Automatically formats python .py files. We are useing the default format
rules of autopep8. To run on file.py and update the file run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">autopep8</span> <span class="o">-</span><span class="n">i</span> <span class="n">file</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="automating-formatting">
<h3>Automating Formatting<a class="headerlink" href="#automating-formatting" title="Permalink to this headline">¶</a></h3>
<p>The above formatters can be automated at every commit using the script
found in the <a class="reference external" href="https://github.com/votca/dev-tools">dev-tools</a>
repository. To use it copy the file <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> to your local .git
subfolder to the hooks folder. E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">777</span> <span class="n">dev</span><span class="o">-</span><span class="n">tools</span><span class="o">/</span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
<span class="n">cp</span> <span class="n">dev</span><span class="o">-</span><span class="n">tools</span><span class="o">/</span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">tools</span><span class="o">/.</span><span class="n">git</span><span class="o">/</span><span class="n">hooks</span><span class="o">/</span>
</pre></div>
</div>
<p>The above will make the script executable and then copy it to the local
.git/hooks directory in the tools repository. The script not only
updates the file format of every file staged during a commit it will
also update the license date.</p>
</div>
</div>
<div class="section" id="cpp-comment-guide">
<h2>CPP Comment Guide<a class="headerlink" href="#cpp-comment-guide" title="Permalink to this headline">¶</a></h2>
<p>It is preferential that the following guidelines be followed when adding
comments to code:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> comment blocks should be avoided and the <code class="docutils literal notranslate"><span class="pre">//</span></code> used in
their place. This is so that the <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> comment blocks can be
easily used for debugging.</p></li>
<li><p>It would be preferential that the following doxygen commenting
stencil be used in the header files above each class and function
description.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
<span class="o">*</span> \<span class="n">brief</span> <span class="n">function</span><span class="o">/</span><span class="k">class</span> <span class="nc">summary</span>
<span class="o">*</span>
<span class="o">*</span> <span class="n">Detailed</span> <span class="n">function</span><span class="o">/</span><span class="k">class</span> <span class="nc">description</span> <span class="k">if</span> <span class="n">needed</span>
<span class="o">*</span>
<span class="o">*</span> <span class="nd">@param</span><span class="p">[</span><span class="ow">in</span><span class="p">]</span> <span class="o">-</span> <span class="n">description</span> <span class="n">of</span> <span class="n">parameter</span> <span class="mi">1</span>
<span class="o">*</span> <span class="nd">@param</span><span class="p">[</span><span class="n">out</span><span class="p">]</span> <span class="o">-</span> <span class="n">description</span> <span class="n">of</span> <span class="n">parameter</span> <span class="mi">2</span>
<span class="o">*</span> <span class="nd">@param</span><span class="p">[</span><span class="ow">in</span><span class="p">,</span><span class="n">out</span><span class="p">]</span> <span class="o">-</span> <span class="n">description</span> <span class="n">of</span> <span class="n">parameter</span> <span class="mi">3</span>
<span class="o">*</span> <span class="p">:</span>
<span class="o">*</span> <span class="nd">@return</span> <span class="o">-</span> <span class="n">description</span> <span class="n">of</span> <span class="k">return</span> <span class="nb">type</span>
<span class="o">*/</span>
</pre></div>
</div>
</li>
</ol>
<p>Doxygen commenting will help future developers maintain the code, in
its fully compiled state. It may be found at: <a class="reference external" href="http://doc.votca.org">http://doc.votca.org</a>.</p>
<p>NOTE: Compilation of the doxygen documentation is automated when code is
merged into the <code class="code docutils literal notranslate"><span class="pre">master</span></code> votca branch!</p>
</div>
<div class="section" id="updating-git-submodules">
<h2>Updating Git Submodules<a class="headerlink" href="#updating-git-submodules" title="Permalink to this headline">¶</a></h2>
<p>VOTCA with all of its repos can be build by using the parent <a class="reference external" href="https://github.com/votca/votca">votca
repo</a>. All the other necessary repos
appear as submodules in the parent repo. It is worth noting, the
submodules are automatically updated through a pull request whenever changes are made to
their respective <code class="code docutils literal notranslate"><span class="pre">master</span></code> branches. In essence, a submodule refers to a
specific commit of the repo it represents.</p>
<p>Normally, it is not necessary, but occassionally a new commit must be manually
merged into the <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch of a child repository. If this occurs, the
submodule state in the parent repo also has to be updated to reflect the latest
commit of the child repo.</p>
<p>To update the state of a submodule the following commands can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">foreach</span> <span class="n">git</span> <span class="n">pull</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">u</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;update all submodules&quot;</span>
</pre></div>
</div>
<p>Updates from <code class="code docutils literal notranslate"><span class="pre">stable</span></code></p>
<p>The <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch contains the latest release with the most uptodate bug fixes since the release.
Only in very limited circumstances should new features be merged into the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch.
Developers can add bug fixes by making a pull request with the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch as target.</p>
<p>As the <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch of each repo is a child of each repo’s <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch,
any bugfix added to a repos <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch will also need to be pulled into its <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch. If the bugfix
is added in one of the child repositories (not <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code>) then <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> will also need to
reflect these changes.</p>
<p>Keeping the repositories synchronised can be difficult. In order to help keep the <code class="code docutils literal notranslate"><span class="pre">master</span></code> branches and <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code>
synchronised with changes in the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch of a child repository the generation of four pull requests are
automatically generated anytime a bugfix is made to the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch of a child repository.</p>
<p>E.g. if <code class="code docutils literal notranslate"><span class="pre">hot-bug-fix</span></code> is merged into the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch of <code class="code docutils literal notranslate"><span class="pre">tools</span></code>:</p>
<ol class="arabic simple">
<li><p>A pull request is created to merge <code class="code docutils literal notranslate"><span class="pre">stable</span></code> from <code class="code docutils literal notranslate"><span class="pre">tools</span></code> (child repo) into <code class="code docutils literal notranslate"><span class="pre">master</span></code> of <code class="code docutils literal notranslate"><span class="pre">tools</span></code> (child repo).</p></li>
<li><p>A pull request is created to merge <code class="code docutils literal notranslate"><span class="pre">stable</span></code> from <code class="code docutils literal notranslate"><span class="pre">tools</span></code> (child repo) into <code class="code docutils literal notranslate"><span class="pre">stable</span></code> of <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> (parent repo). This shoud consiste of updating the submodules in the <code class="code docutils literal notranslate"><span class="pre">stable</span></code> branch of votca/votca.</p></li>
<li><p>A pull request is created to merge <code class="code docutils literal notranslate"><span class="pre">master</span></code> from <code class="code docutils literal notranslate"><span class="pre">tools</span></code> (child repo) into <code class="code docutils literal notranslate"><span class="pre">master</span></code> of <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> (parent repo). Again this should consist of updating the submodules but in the <code class="code docutils literal notranslate"><span class="pre">master</span></code> branch of votca/votca.</p></li>
<li><p>Finally, a pull request is made from <code class="code docutils literal notranslate"><span class="pre">stable</span></code> from <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> (parent repo) to <code class="code docutils literal notranslate"><span class="pre">master</span></code> of <code class="code docutils literal notranslate"><span class="pre">votca/votca</span></code> (parent repo).</p></li>
</ol>
<p>To minimize manual work, it is usually best to merge the pull requests in the order that hey have been shown in the example.</p>
</div>
<div class="section" id="failed-release-builds">
<h2>Failed Release Builds<a class="headerlink" href="#failed-release-builds" title="Permalink to this headline">¶</a></h2>
<p>To prepare votca for distribution on different linux flavors there are
different requirements from the package managers. Some of the
architectures that the package managers support can be quite varied. In
the case that a failure occurs on an architecture, that is not available
to you, there are different approaches for debugging the problem. As an
example, fedora dnf has extended support to the <strong>pcc64le</strong> architecture.
Assuming you have access to fedora you can run the following commands to
simulate the build process on the <strong>pcc64le</strong> architecture:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dnf</span> <span class="n">update</span>
<span class="n">dnf</span> <span class="n">install</span> <span class="n">qemu</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">static</span> <span class="n">dnf</span><span class="o">-</span><span class="n">utils</span>
<span class="n">usermod</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">G</span> <span class="n">mock</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
<span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">epel</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">ppc64le</span> <span class="o">--</span><span class="n">forcearch</span> <span class="n">ppc64le</span> <span class="o">--</span><span class="n">dnf</span> <span class="o">--</span><span class="n">init</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">votca</span><span class="o">/</span><span class="n">fedora</span><span class="o">-</span><span class="n">copr</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">votca</span><span class="o">.</span><span class="n">spec</span>
<span class="n">spectool</span> <span class="o">-</span><span class="n">g</span> <span class="n">votca</span><span class="o">.</span><span class="n">spec</span>
<span class="n">rpmbuild</span> <span class="o">-</span><span class="n">D</span><span class="s2">&quot;_sourcedir $</span><span class="si">{PWD}</span><span class="s2">&quot;</span> <span class="o">-</span><span class="n">D</span><span class="s2">&quot;_srcrpmdir $</span><span class="si">{PWD}</span><span class="s2">&quot;</span> <span class="o">-</span><span class="n">bs</span> <span class="n">votca</span><span class="o">.</span><span class="n">spec</span>
<span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">epel</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">ppc64le</span> <span class="o">--</span><span class="n">forcearch</span> <span class="n">ppc64le</span> <span class="o">--</span><span class="n">dnf</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">clean</span> <span class="n">votca</span><span class="o">-</span><span class="mf">1.5</span><span class="o">-</span><span class="mf">1.</span><span class="o">*.</span><span class="n">src</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
<p>Here, votca-1.5-1 should be replaced with the correct version. The above
commands would setup and run the dnf installation process on the
<strong>pcc64le</strong> enviroment. If a bug was found and the build crashes one can
interactively intervene by issuing the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">epel</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">ppc64le</span> <span class="o">--</span><span class="n">forcearch</span> <span class="n">ppc64le</span> <span class="o">--</span><span class="n">shell</span>
</pre></div>
</div>
<p>You will also need to install a text editor if you want to change the
source files before running the interactive instance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mock</span> <span class="o">-</span><span class="n">r</span> <span class="n">epel</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">ppc64le</span> <span class="o">--</span><span class="n">forcearch</span> <span class="n">ppc64le</span> <span class="o">--</span><span class="n">install</span> <span class="n">vim</span>
</pre></div>
</div>
<p>Note: we have used this process with the <strong>ppc64le</strong> architecture as an
example, but the same procedure can be extended with different
architectures and diferent operating systems. For example, you could use
the <strong>aarch64</strong> or <strong>armv7hl</strong> architecture in place of <strong>pcc64le</strong>. You
could also replace the <strong>epel-7-ppc64le</strong> os-architecure to
<strong>fedora-28-ppc64le</strong>, <strong>fedora-27-aarch64</strong> or some other combination.
A final point, if you simply want to build natively, for instance if you
are running fedora on an <strong>x86_64</strong> machine, the <code class="docutils literal notranslate"><span class="pre">frocearch</span> <span class="pre">pcc64le</span></code>
in the above case could just be dropped.</p>
</div>
</div>


           </div>
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="xtp-tutorials/LAMMPS_KMC.html" class="btn btn-neutral float-left" title="Kinect Monte Carlo Simulations Using LAMMPS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="VOTCA_LANGUAGE_GUIDE.html" class="btn btn-neutral float-right" title="VOTCA Internal Contributor Language Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, VOTCA Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>