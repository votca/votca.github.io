
dftgwbse
********
Compute electronic excitations using GW-BSE
The following table contains the defaults input options for the calculator,

.. list-table::
   :header-rows: 1
   :widths: 30 20 15 15
   :align: center

   * - Property Name
     - Default Value
     - Description
     - Valid Input
   * - optimize
     - false
     - Perform a molecular geometry optimization
     - bool
   * - basisset
     - def2-tzvp
     - Basis set for MOs
     - 
   * - auxbasisset
     - aux-def2-tzvp
     - Auxiliary basis set for RI
     - 
   * - functional
     - XC_HYB_GGA_XC_PBEH
     - Functional name(s) according to LIBXC
     - 
   * - dftpackage.package.name
     - xtp
     - Name of the DFT package
     - | xtp
       | orca
   * - dftpackage.package.use_auxbasisset
     - true
     - use an auxiliar basisset
     - bool
   * - use_mpsfile
     - false
     - check for MPS file with external multipoles for embedding
     - bool
   * - mpsfile
     - 
     - MPS file to read from if use_mpsfile
     - 
   * - use_guess
     - false
     - Use a precomputed wave function
     - bool
   * - guess
     - 
     - | File to read the wave function if the use guess flag is
       | set to true
     - 
   * - gwbse_engine.tasks
     - input,dft,parse,gwbse
     - task to compute
     - | [input
       | dft
       | parse
       | gwbse]
   * - gwbse_engine.gwbse_options.gwbse.ranges
     - default
     - | default: all levels in RPA, 1:2*HOMO in QP and all in
       | BSE; other options: factor,explicit
     - | default
       | factor
       | explicit
       | full
   * - gwbse_engine.gwbse_options.gwbse.rpamax
     - 
     - | only needed, if ranges is factor or explicit, number of
       | levels in rpa
     - 
   * - gwbse_engine.gwbse_options.gwbse.qpmin
     - 
     - | only needed, if ranges is factor or explicit, lowest MO
       | to be used in GW
     - 
   * - gwbse_engine.gwbse_options.gwbse.qpmax
     - 
     - | only needed, if ranges is factor or explicit, highest
       | MO to be used in GW
     - 
   * - gwbse_engine.gwbse_options.gwbse.bsemin
     - 
     - | only needed, if ranges is factor or explicit, lowest MO
       | to be used in BSE
     - 
   * - gwbse_engine.gwbse_options.gwbse.bsemax
     - 
     - | only needed, if ranges is factor or explicit, highest
       | MO to be used in BSE
     - 
   * - gwbse_engine.gwbse_options.gwbse.vxc.grid
     - medium
     - grid quality
     - | xcoarse
       | coarse
       | medium
       | fine
       | xfine
   * - gwbse_engine.gwbse_options.gwbse.scissor_shift
     - 0.0
     - preshift unoccupied MOs by a constant for GW calculation
     - float
   * - gwbse_engine.gwbse_options.gwbse.mode
     - evGW
     - use single short (G0W0) or self-consistent GW (evGW)
     - | evGW
       | G0W0
   * - gwbse_engine.gwbse_options.gwbse.tasks
     - gw,singlets
     - tasks to do
     - | [gw
       | singlets
       | triplets
       | all]
   * - gwbse_engine.gwbse_options.gwbse.sigma_integrator
     - ppm
     - self-energy correlation integration method
     - | ppm
       |  exact
       |  cda
   * - gwbse_engine.gwbse_options.gwbse.eta
     - 1e-3
     - small parameter eta of the Green's function
     - float+
   * - gwbse_engine.gwbse_options.gwbse.alpha
     - 1e-3
     - | parameter to smooth residue and integral calculation for
       | the contour deformation technique
     - float
   * - gwbse_engine.gwbse_options.gwbse.quadrature_scheme
     - legendre
     - | If CDA is used for sigma integration this set the quadrature
       | scheme to use
     - | hermite
       | laguerre
       | legendre
   * - gwbse_engine.gwbse_options.gwbse.quadrature_order
     - 12
     - Quadrature order if CDA is used for sigma integration
     - | 8
       | 10
       | 12
       | 14
       | 16
       | 18
       | 20
       | 40
       | 100
   * - gwbse_engine.gwbse_options.gwbse.qp_solver
     - grid
     - QP equation solve method
     - | fixedpoint
       | grid
   * - gwbse_engine.gwbse_options.gwbse.qp_grid_steps
     - 1001
     - number of QP grid points
     - int+
   * - gwbse_engine.gwbse_options.gwbse.qp_grid_spacing
     - 0.001
     - spacing of QP grid points
     - float+
   * - gwbse_engine.gwbse_options.gwbse.exctotal
     - 30
     - maximum number of BSE states to calculate
     - int+
   * - gwbse_engine.gwbse_options.gwbse.useTDA
     - false
     - use TDA for BSE
     - bool
   * - gwbse_engine.gwbse_options.gwbse.dynamical_screening_max_iterations
     - 0
     - | maximum number of iterations for perturbative dynamical
       | screening in BSE
     - int+
   * - gwbse_engine.gwbse_options.gwbse.dynamical_screening_tolerance
     - 1e-5
     - | convergence tolerance for perturbative dynamical screening
       | in BSE
     - float+
   * - gwbse_engine.gwbse_options.gwbse.ignore_corelevels
     - no
     - | exclude core MO level from calculation on RPA,GW or BSE
       | level
     - | RPA
       | GW
       | BSE
       | no
   * - gwbse_engine.gwbse_options.gwbse.eigensolver.davidson_correction
     - DPR
     - Davidson correction method
     - | DPR
       | OHLSEN
   * - gwbse_engine.gwbse_options.gwbse.eigensolver.davidson_tolerance
     - normal
     - Numerical tolerance
     - | loose
       | normal
       | strict
       | lapack
   * - gwbse_engine.gwbse_options.gwbse.eigensolver.davidson_ortho
     - GS
     - orthogonalisation routine: GramSchmidt or QR
     - | GS
       | QR
   * - gwbse_engine.gwbse_options.gwbse.eigensolver.davidson_update
     - safe
     -  how large the search space
     - | min
       | safe
       | max
   * - gwbse_engine.gwbse_options.gwbse.eigensolver.davidson_maxiter
     - 50
     - max iterations
     - int+
   * - gwbse_engine.gwbse_options.gwbse.gw_sc_max_iterations
     - 50
     - Maximum number of iterations in eVGW
     - int+
   * - gwbse_engine.gwbse_options.gwbse.gw_mixing_order
     - 20
     - | Mixing of QP energies in evGW - 0: plain, 1: linear, >1:
       | Anderson
     - int+
   * - gwbse_engine.gwbse_options.gwbse.gw_sc_limit
     - 1e-5
     - evGW convergence criteria
     - float+
   * - gwbse_engine.gwbse_options.gwbse.gw_mixing_alpha
     - 0.7
     - mixing alpha, also linear mixing
     - float+
   * - gwbse_engine.gwbse_options.gwbse.g_sc_max_iterations
     - 100
     - | maximum number of iterations for quasiparticle equation
       | solution
     - int+
   * - gwbse_engine.gwbse_options.gwbse.g_sc_limit
     - 1e-5
     - quasiparticle equation solver convergence
     - float+
   * - gwbse_engine.gwbse_options.gwbse.use_Hqp_offdiag
     - false
     - | Using symmetrized off-diagonal elements of QP Hamiltonian
       | in BSE
     - bool
   * - gwbse_engine.gwbse_options.gwbse.sigma_plot_states
     - 
     - plot sigma(omega) for the following states, e.g 1 3 5
     - 
   * - gwbse_engine.gwbse_options.gwbse.sigma_plot_steps
     - 201
     - points to plot
     - int+
   * - gwbse_engine.gwbse_options.gwbse.sigma_plot_spacing
     - 1e-2
     - spacing of points units
     - float+
   * - gwbse_engine.gwbse_options.gwbse.sigma_plot_filename
     - QPenergies_sigma.dat
     - 
     - 
   * - gwbse_engine.gwbse_options.gwbse.bse_print_weight
     - 0.5
     - print exciton WF composition weight larger than minimum
     - float+
   * - gwbse_engine.gwbse_options.gwbse.rebuild_threecenter_freq
     - 5
     - how often the 3c integrals in iterate should be rebuilt
     - int+
   * - gwbse_engine.gwbse_options.gwbse.exctotal
     - 5
     - number of eigenvectors to calculate
     - int+
   * - gwbse_engine.gwbse_options.gwbse.ignore_corelevels
     - none
     - 
     - | none
       | RPA
       | BSE
       | GW
   * - gwbse_engine.redirect_logger
     - false
     - Redirect Logger
     - bool
   * - geometry_optimization.state
     - s1
     - initial state to optimize for
     - 
   * - geometry_optimization.maxiter
     - 50
     - Maximum iteration number
     - int+
   * - geometry_optimization.trajectory_file
     - optimisation.trj
     - File to write trajectory
     - 
   * - geometry_optimization.statetracker.oscillatorstrength
     - 0.0001
     - 
     - float+
   * - geometry_optimization.statetracker.filters
     - oscillatorstrength
     - property to track
     - | [chargetransfer
       | density
       | localisation
       | oscillatorstrength
       | overlap]
   * - geometry_optimization.convergence.energy
     - 1.e-6
     - Energy error tolerance
     - float+
   * - geometry_optimization.convergence.RMSForce
     - 3.e-5
     - Force Root mean square error tolerance
     - float+
   * - geometry_optimization.convergence.MaxForce
     - 1.e-4
     - Maximum force Convergence criteria
     - float+
   * - geometry_optimization.convergence.RMSStep
     - 6.e-4
     - Step Root mean square error tolerance
     - float+
   * - geometry_optimization.convergence.MaxStep
     - 1.e-3
     - convergence criteria for geometry optimisation
     - float+
   * - geometry_optimization.optimizer.method
     - BFGS-TRM
     - 
     - BFGS-TRM
   * - geometry_optimization.optimizer.trust
     - 0.01
     - initial trustregion
     - float+
   * - geometry_optimization.forces.method
     - central
     - finite differences method, central or forward
     - central forward
   * - geometry_optimization.forces.CoMforce_removal
     - true
     - Remove total force on molecule
     - bool
   * - geometry_optimization.forces.displacement
     - 0.001
     - finite difference displacement
     - float+
.. note::
   An *xml* file containing the defaults for the `dftgwbse` calculator can be found at `$VOTCASHARE/xtp/xml/dftgwbse.xml`
